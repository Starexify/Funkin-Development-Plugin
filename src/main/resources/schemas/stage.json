{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Stage Data",
  "type": "object",
  "properties": {
    "version": { "type": "string", "description": "Semantic version for stage data." },
    "name": { "type": "string", "default": "Unknown", "description": "Readable name of the stage." },
    "cameraZoom": { "type": "number", "default": 1.0 },
    "directory": { "type": ["string", "null"], "default": "shared" },
    "characters": {
      "type": "object",
      "properties": {
        "bf": { "$ref": "#/$defs/stageCharacter" },
        "dad": { "$ref": "#/$defs/stageCharacter" },
        "gf": { "$ref": "#/$defs/stageCharacter" }
      },
      "required": ["bf", "dad", "gf"]
    },
    "props": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": { "type": "string" },
          "assetPath": { "type": "string", "description": "Asset path or hex color string for rectangles." },
          "animType": {
            "type": "string",
            "enum": ["sparrow", "packer", "animateatlas"],
            "default": "sparrow",
            "description": "The animation type of the stage props"
          },
          "position": { "$ref": "common.json#/$defs/offset2D" },
          "zIndex": { "type": "integer", "default": 0 },
          "isPixel": { "type": "boolean", "default": false },
          "flipX": { "type": "boolean", "default": false },
          "flipY": { "type": "boolean", "default": false },
          "scale": {
            "oneOf": [
              { "type": "number", "default": 1.0 },
              { "type": "array", "items": { "type": "number" }, "minItems": 2, "maxItems": 2 }
            ]
          },
          "alpha": { "type": "number", "default": 1.0 },
          "danceEvery": { "type": "number", "default": 0.0 },
          "scroll": { "$ref": "common.json#/$defs/scroll2D" },
          "animations": {
            "type": "array",
            "items": { "$ref": "common.json#/$defs/animation" }
          },
          "startingAnimation": { "type": ["string", "null"] },
          "angle": { "type": "number", "default": 0.0 },
          "blend": { "type": "string", "default": "" },
          "color": { "type": "string", "format": "color", "default": "#FFFFFF" }
        },
        "required": ["assetPath", "position"]
      }
    }
  },
  "required": ["name", "characters", "props"],
  "$defs": {
    "stageCharacter": {
      "type": "object",
      "properties": {
        "zIndex": { "type": "integer", "default": 0 },
        "position": { "$ref": "common.json#/$defs/offset2D" },
        "scale": { "type": "number", "default": 1 },
        "cameraOffsets": { "$ref": "common.json#/$defs/offset2D" },
        "scroll": { "$ref": "common.json#/$defs/scroll2D" },
        "alpha": { "type": "number", "default": 1.0 },
        "angle": { "type": "number", "default": 0.0 }
      }
    }
  }
}